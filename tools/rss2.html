
<figure class="highlight erb"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span><span class="php"><span class="meta">&lt;?</span>xml-stylesheet type=<span class="string">"text/css"</span> href=<span class="string">"/public/css/rss.css"</span> <span class="meta">?&gt;</span></span></span></div><div class="line"><span class="tag">&lt;<span class="name">rss</span> <span class="attr">version</span>=<span class="string">"2.0"</span></span></div><div class="line">  <span class="attr">xmlns:atom</span>=<span class="string">"http://www.w3.org/2005/Atom"</span></div><div class="line">  <span class="attr">xmlns:content</span>=<span class="string">"http://purl.org/rss/1.0/modules/content/"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">channel</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby">: config.title <span class="params">| cdata </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby"><span class="params"> encodeURI(url) </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span> <span class="attr">src</span>=<span class="string">"/public/js/rss.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">atom:link</span> <span class="attr">href</span>=<span class="string">"&lt;%-</span></span><span class="ruby"><span class="params"> encodeURI(feed_url) </span></span><span class="xml"><span class="tag"><span class="string">%&gt;"</span> <span class="attr">rel</span>=<span class="string">"self"</span> <span class="attr">type</span>=<span class="string">"application/rss+xml"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby"><span class="params">: config.description |</span> cdata </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pubDate</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span><span class="ruby"> posts.first().updated.toDate().toString() </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">pubDate</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">generator</span>&gt;</span>http://hexo.io/<span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"> posts.each(function(post)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby">: post.title <span class="params">| cdata </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">link</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby"><span class="params"> encodeURI(url + post.path) </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">guid</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span><span class="ruby"><span class="params"> encodeURI(url + post.path) </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">guid</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">pubDate</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span><span class="ruby"><span class="params"> post.date.toDate().toString() </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">pubDate</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">description</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"><span class="params"> <span class="keyword">if</span> (post.description)&#123; </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"><span class="params">: post.description |</span> cdata </span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (post.excerpt)&#123; </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">: post.excerpt <span class="params">| cdata </span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"><span class="params"> &#125; <span class="keyword">else</span> &#123;</span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"><span class="params">: post.content.substring(0, 140) |</span> cdata </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">description</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">content:encoded</span>&gt;</span><span class="tag">&lt;<span class="name">%</span></span><span class="ruby"> <span class="keyword">if</span> (post.description)&#123; </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">: post.description <span class="params">| cdata </span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"><span class="params"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (post.excerpt)&#123; </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"><span class="params">: post.excerpt |</span> cdata </span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"> &#125; <span class="keyword">else</span> &#123;</span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">: post.content.substring(<span class="number">0</span>, <span class="number">140</span>) <span class="params">| cdata </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"><span class="params"> &#125; </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">content:encoded</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"><span class="params"> <span class="keyword">if</span> (post.comments)&#123; </span></span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">comments</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"><span class="params"> encodeURI(url + post.path) </span></span><span class="xml"><span class="tag">%&gt;</span>#disqus_thread<span class="tag">&lt;/<span class="name">comments</span>&gt;</span><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"><span class="params"> &#125; </span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%</span></span><span class="ruby"><span class="params"> &#125;) </span></span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">channel</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">rss</span>&gt;</span></div></pre></td></tr></table></figure>

